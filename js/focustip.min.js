/*
 * FocusTip v1
 * http://pooyarm.github.io/FocusTip/
 *
 * Created by Pooya Rostam
 * http://1pooya.com/
 * https://github.com/pooyarm
 */
var FocusTip=function(t){this.options={color:"#008dbc",target:"",text:"",textColor:"#FFF",width:100,height:100,delay:100,ok:"Got it",callback:function(){}},this.el=!1,this.close=!1,this.uniqueClass=null;var i=this;return"undefined"==typeof t||"object"!=typeof t.target||0==t.target.length||"undefined"==typeof t.text?!1:($.extend(this.options,t),this.init=function(){this.initElement(),this.close.on("click",this.destroy),$(window).on("resize.focustip_"+this.uniqueClass,function(){i.initPosition(!0)})},this.initElement=function(){this.el=$("<div></div>").addClass("focusTip"),this.uniqueClass="focusTip_"+Math.floor(26*Math.random())+Date.now(),this.el.addClass(this.uniqueClass),this.el.html("<div><p>"+this.options.text+"</p><a href='javascript:void(0);' class='ok'>"+this.options.ok+"</a></div>"),this.close=this.el.find("a.ok"),$("body").addClass("focusTipfix"),$.when(this.initScroll()).done(function(){i.initPosition(),i.initColor(),$("body").append(i.el),i.el.delay(i.options.delay).fadeIn("fast")})},this.initPosition=function(t){"undefined"==typeof t&&(t=!1);var i=this.options.target.offset(),e=this.options.target.outerHeight(),o=this.options.target.outerWidth(),s=$(window).scrollTop(),n=i.left+o/2-this.options.width/2,l=i.top+e/2-this.options.height/2-s;t?this.el.stop().animate({left:n+"px",top:l+"px"},400):this.el.css({left:n+"px",top:l+"px"});var a=$(document).width(),r=a/12;if(n>a/2-r&&a/2+r>n&&a>700){this.el.removeClass("on-right").addClass("on-center");var h=a/3}else if(n>a/2){this.el.addClass("on-right").removeClass("on-center");var h=a-(a-n-this.options.width)-25}else{this.el.removeClass("on-right").removeClass("on-center");var h=a-n-25}this.el.children("div").css("max-width",h+"px")},this.initColor=function(){var t=this.hexToRgb(this.options.color),i=document.createElement("style");document.head.appendChild(i),sheet=i.sheet,sheet.insertRule(".focusTip."+this.uniqueClass+":before{ border-color: rgba("+t.r+","+t.g+","+t.b+",0.8); }",0),this.el.children("div").css("color",this.options.textColor)},this.initScroll=function(){var t=this.options.target.offset().top-200;0>t&&(t=0);var i=new $.Deferred;return $("body,html").animate({scrollTop:t},200,"swing",function(){i.resolve()}),i.promise()},this.destroy=function(t){t.preventDefault(),i.el.fadeOut("fast",function(){i.el.remove(),$("body").removeClass("focusTipfix"),"function"==typeof i.options.callback&&i.options.callback.call()}),$(window).off("resize.focustip_"+i.uniqueClass)},this.hexToRgb=function(t){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,function(t,i,e,o){return i+i+e+e+o+o});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},void this.init())};